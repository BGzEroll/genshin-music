(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[910],{5164:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backup",function(){return t(4972)}])},1446:function(e,n,t){"use strict";t.d(n,{G:function(){return l}});var r=t(7568),a=t(655),s=t(5893),o=t(7294);function l(e){var n,t=e.children,l=e.onPick,i=e.style,c=e.as,u=e.multiple,d=e.onError,f=(0,o.useRef)(null),h=(0,o.useCallback)((n=(0,r.Z)(function(e){var n,t,r,s;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(null===e.target.files)return[2];if(t=Array.from(null!==(n=e.target.files)&&void 0!==n?n:[]),"file"===c)return[2,l(t.map(function(e){return{data:e,file:e}}))];r=t.map(function(e){return new Promise(function(n,t){var r=new FileReader;try{r.addEventListener("loadend",function(){try{var a=r.result;n({data:"json"===c?JSON.parse(a):a,file:e})}catch(e){t(e)}},{once:!0}),("text"===c||"json"===c)&&r.readAsText(e),"buffer"===c&&r.readAsArrayBuffer(e)}catch(e){t(e)}})}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return l(a.sent()),[3,4];case 3:return console.error(s=a.sent()),null==d||d(s,t),[3,4];case 4:return null!==f.current&&(f.current.value=""),[2]}})}),function(e){return n.apply(this,arguments)}),[c,l,d]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"file",style:{display:"none"},ref:f,onChange:h,multiple:void 0!==u&&u}),(0,s.jsx)("div",{onClick:function(){var e;return null===(e=f.current)||void 0===e?void 0:e.click()},style:void 0===i?{}:i,children:t})]})}},6390:function(e,n,t){"use strict";t.d(n,{k:function(){return s}});var r=t(5893),a=t(369);function s(e){var n=e.excludeMenu,t=e.children,s=e.className,o=e.style;return(0,r.jsxs)("div",{className:"default-page "+(void 0===s?"":s),style:o,children:[!(void 0!==n&&n)&&(0,r.jsx)(a.O,{}),(0,r.jsx)("div",{className:"default-content",children:t})]})}},369:function(e,n,t){"use strict";t.d(n,{O:function(){return c}});var r=t(5893),a=t(9583),s=t(7671),o=t(9255),l=t(2809),i=t(1163);function c(e){var n=e.children,t=e.className,c=(0,i.useRouter)();return(0,r.jsx)("div",{className:"menu-wrapper "+(void 0===t?"":t),children:(0,r.jsxs)("div",{className:"menu menu-visible",style:{justifyContent:"flex-end"},children:[o.U.hasNavigated&&(0,r.jsx)(s.s,{style:{marginBottom:"auto"},onClick:function(){c.back()},ariaLabel:"Go back",children:(0,r.jsx)(a.x_l,{className:"icon"})}),void 0===n?void 0:n,(0,r.jsx)(s.s,{ariaLabel:"Go to discord",children:(0,r.jsx)("a",{href:"https://discord.gg/Arsf65YYHq",target:"_blank",rel:"noreferrer",children:(0,r.jsx)(a.j2d,{className:"icon"})})}),(0,r.jsx)(s.s,{onClick:l.I.open,ariaLabel:"Open home menu",children:(0,r.jsx)(a.xng,{className:"icon"})})]})})}},4995:function(e,n,t){"use strict";t.d(n,{D:function(){return a}});var r=t(7294);function a(e){var n=e.text;return(0,r.useEffect)(function(){document.title=n},[n]),null}},7008:function(e,n,t){"use strict";t.d(n,{n:function(){return i}});var r=t(828),a=t(6305),s=t(7294),o=t(8949),l=t(2650);function i(){var e=(0,r.Z)((0,s.useState)(l.k.songs),2),n=e[0],t=e[1];return(0,s.useEffect)(function(){var e,n;return e=function(e){t(e)},n=(0,o.N7)(l.k.songs,function(){e((0,a.Z)(l.k.songs))}),e((0,a.Z)(l.k.songs)),n},[]),[n]}},4972:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(7568),a=t(6042),s=t(9396),o=t(828),l=t(6305),i=t(655),c=t(5893),u=t(8461),d=t(6390),f=t(4995),h=t(9583),g=t(7294),p=t(1182),y=t(2585),m=t(8434),v=t(5272),w=t(750),k=t(4339),b=t(2132),x=t(766),j=t(2169),_=t(1446),N=t(6743),D=t(7008),Z=t(3707),E=t(5352),A=t(2650),C=t(5684);function L(){var e={marginRight:"0.3rem",marginLeft:"-0.4rem"},n=(0,o.Z)((0,D.n)(),1)[0],t=(0,Z.ih)(E.N.themes);function L(){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(function(){var e,n,t,r,a,s,o,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return k.kg.showPill("Validating songs..."),[4,p.v.getSongs()];case 1:e=i.sent(),n=[],t=!0,r=!1,a=void 0;try{for(s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){c=o.value;try{p.v.parseSong(c)}catch(e){console.error(e),n.push(c),k.kg.error('Error validating song "'.concat(null==c?void 0:c.name,'"'))}}}catch(e){r=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}if(!(n.length>0))return[3,3];return[4,(0,w.cJ)("There were errors validating some songs. Do you want to continue downloading?")];case 2:if(!i.sent())return[2,null];i.label=3;case 3:return k.kg.hidePill(),[2,(0,l.Z)(e)]}})})).apply(this,arguments)}function J(){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function(){var e,n,t,r,a,s,o,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return k.kg.showPill("Validating folders..."),e=[],[4,v.b.getFolders()];case 1:n=i.sent(),t=!0,r=!1,a=void 0;try{for(s=n[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){c=o.value;try{x.g.deserialize(c)}catch(n){console.error(n),e.push(c),k.kg.error('Error validating folder "'.concat(null==c?void 0:c.name,'"'))}}}catch(e){r=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}if(!(e.length>0))return[3,3];return[4,(0,w.cJ)("There were errors validating some folders. Do you want to continue downloading?")];case 2:if(!i.sent())return[2,null];i.label=3;case 3:return k.kg.hidePill(),[2,(0,l.Z)(n)]}})})).apply(this,arguments)}function R(){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)(function(){var e,n,t,r,a,s,o;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return k.kg.showPill("Validating themes..."),[4,y.a.getThemes()];case 1:e=i.sent(),n=[],t=!0,r=!1,a=void 0;try{for(s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)o.value}catch(e){r=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}if(!(n.length>0))return[3,3];return[4,(0,w.cJ)("There were errors validating some themes. Do you want to continue downloading?")];case 2:if(!i.sent())return[2,null];i.label=3;case 3:return k.kg.hidePill(),[2,(0,l.Z)(e)]}})})).apply(this,arguments)}function F(){return(F=(0,r.Z)(function(e){var n,t,r,a,s,o,l,c,u;return(0,i.__generator)(this,function(i){switch(i.label){case 0:n=!0,t=!1,r=void 0,i.label=1;case 1:i.trys.push([1,8,9,10]),a=e[Symbol.iterator](),i.label=2;case 2:if(n=(s=a.next()).done)return[3,7];o=s.value,i.label=3;case 3:return i.trys.push([3,5,,6]),l=Array.isArray(o.data)?o.data:[o.data],[4,b.bV.importAndLog(l)];case 4:return i.sent(),[3,6];case 5:return console.error(i.sent()),k.kg.error('Error importing file "'.concat(null===(c=o.file)||void 0===c?void 0:c.name,'"')),[3,6];case 6:return n=!0,[3,2];case 7:return[3,10];case 8:return u=i.sent(),t=!0,r=u,[3,10];case 9:try{n||null==a.return||a.return()}finally{if(t)throw r}return[7];case 10:return[2]}})})).apply(this,arguments)}function G(){return(G=(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,w.cJ)("Write 'delete' if you want to delete all songs, press cancel to ignore")];case 1:if("delete"!==e.sent())return[2,k.kg.warn("Action cancelled")];return[4,(0,N.gw)(200)];case 2:return e.sent(),[4,(0,w.jH)("Are you REALLY sure you want to delete all songs?")];case 3:if(!e.sent())return[2,k.kg.warn("Action cancelled")];return[4,A.k._DANGEROUS_CLEAR_ALL_SONGS()];case 4:return e.sent(),[4,m.p._DANGEROUS_CLEAR_ALL_FOLDERS()];case 5:return e.sent(),k.kg.success("Deleted all songs"),[2]}})})).apply(this,arguments)}function H(){return(H=(0,r.Z)(function(){return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,w.cJ)("Write 'delete' if you want to delete all themes")];case 1:if("delete"!==e.sent())return[2,k.kg.warn("Action cancelled")];return[4,(0,N.gw)(200)];case 2:return e.sent(),[4,(0,w.jH)("Are you REALLY sure you want to delete all themes?")];case 3:if(!e.sent())return[2,k.kg.warn("Action cancelled")];return[4,E.N._DANGEROUS_CLEAR_ALL_THEMES()];case 4:return e.sent(),k.kg.success("Deleted all themes"),[2]}})})).apply(this,arguments)}return(0,g.useEffect)(function(){return function(){return k.kg.hidePill()}},[]),(0,c.jsxs)(d.k,{children:[(0,c.jsx)(f.D,{text:"Backup"}),(0,c.jsx)("h1",{children:"Backup"}),(0,c.jsx)("div",{children:"Make sure you create a backup every now and then. Especially if you just finished a new song. The browser shouldn't delete your data, especially if you installed the app, but there is always a chance."}),(0,c.jsxs)("div",{className:"row space-between",style:{marginTop:"2rem"},children:[(0,c.jsxs)(u.J,{tooltip:"Download all the data of the app, aka themes, songs, folders",className:"flex-centered",onClick:(0,r.Z)(function(){var e,n,t;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,L()];case 1:if(!(e=r.sent()))return[2];return[4,J()];case 2:if(!(n=r.sent()))return[2];return[4,R()];case 3:if(!(t=r.sent()))return[2];return b.bV.downloadFiles((0,l.Z)(e).concat((0,l.Z)(n),(0,l.Z)(t)),"".concat(j.iC,"-all-backup-").concat(T(),".json")),k.kg.success("Downloaded backup"),C.j.setLastBackupWarningTime(Date.now()),[2]}})}),children:[(0,c.jsx)(h.ZJh,{style:e}),"Download all backup"]}),(0,c.jsxs)(u.J,{tooltip:"Downloads a backup containing all songs and folders",className:"flex-centered",onClick:(0,r.Z)(function(){var e,n;return(0,i.__generator)(this,function(t){switch(t.label){case 0:return[4,L()];case 1:if(!(e=t.sent()))return[2];return[4,J()];case 2:if(!(n=t.sent()))return[2];return b.bV.downloadFiles((0,l.Z)(e).concat((0,l.Z)(n)),"".concat(j.iC,"-song-backup-").concat(T(),".json")),k.kg.success("Downloaded songs backup"),C.j.setLastBackupWarningTime(Date.now()),[2]}})}),children:[(0,c.jsx)(h.ZJh,{style:e}),"Download song backup"]}),(0,c.jsxs)(u.J,{tooltip:"Downloads a backup of all the custom themes",className:"flex-centered",onClick:(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,R()];case 1:if(!(e=n.sent()))return[2];return b.bV.downloadFiles(e,"".concat(j.iC,"-themes-backup-").concat(T(),".json")),k.kg.success("Downloaded themes backup"),[2]}})}),children:[(0,c.jsx)(h.ZJh,{style:e}),"Download themes backup"]})]}),(0,c.jsx)("div",{style:{marginTop:"2rem"},children:"If you have a backup, you can import it here, they will be added to your existing data. (if you already have the same song, a duplicate will be created)."}),(0,c.jsx)("div",{className:"flex-centered",children:(0,c.jsx)(_.G,{onPick:function(e){return F.apply(this,arguments)},as:"json",onError:function(){return k.kg.error("There was an error reading the file")},children:(0,c.jsxs)(u.J,{className:"flex-centered",tooltip:"Here you can import any backup you have",style:{marginTop:"1rem",backgroundColor:"var(--accent)",color:"var(--accent-text)",padding:"0.8rem"},children:[(0,c.jsx)(h.Xur,{style:(0,s.Z)((0,a.Z)({},e),{fontSize:"1rem",marginRight:"0.5rem"})}),"Import backup"]})})}),(0,c.jsx)("div",{className:"column",style:{flex:"1",justifyContent:"center",padding:"2rem 1rem"},children:(0,c.jsxs)("div",{className:"column",style:{width:"fit-content"},children:[(0,c.jsxs)("span",{children:[n.length," ",1===n.length?"song":"songs"]}),(0,c.jsxs)("span",{children:[t.length," ",1===t.length?"theme":"themes"]})]})}),(0,c.jsx)("div",{style:{marginTop:"1rem"},children:"If you want, you can also delete all your data here, once deleted it can't be recovered. Don't worry you will be asked to confirm before anything is deleted."}),(0,c.jsxs)("div",{className:"row space-around",style:{marginTop:"1rem"},children:[(0,c.jsxs)(u.J,{className:"flex-centered",tooltip:"Here you can delete all your songs and folders",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:function(){return G.apply(this,arguments)},children:[(0,c.jsx)(h.Xm5,{style:e}),"Delete songs and folders"]}),(0,c.jsxs)(u.J,{className:"flex-centered",tooltip:"Here you can delete all your themes",tooltipPosition:"top",style:{backgroundColor:"var(--red-bg)",color:"var(--red-text)"},onClick:function(){return H.apply(this,arguments)},children:[(0,c.jsx)(h.Xm5,{style:e}),"Delete themes"]})]})]})}function T(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth(),"-").concat(e.getDate())}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=5164)}),_N_E=e.O()}]);