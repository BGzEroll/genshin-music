"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{9878:function(e,n,t){t.d(n,{v:function(){return i}});var r=t(5893),o=t(1014);function i(e){var n=e.onClick,t=e.children,i=e.style,l=e.tooltip,c=e.ariaLabel,s=e.className;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{className:"song-button ".concat((0,o.h)(l)," ").concat(null!=s?s:""),onClick:n||function(){},style:i,"aria-label":c,children:[t,l&&(0,r.jsx)(o.u,{children:l})]})})}},125:function(e,n,t){t.d(n,{G:function(){return w}});var r=t(6042),o=t(9396),i=t(828),l=t(5893),c=t(7294),s=t(5055),a=t(7568),u=t(6305),d=t(655),f=t(2132),g=t(3465),m=t.n(g),h=t(3750),p=t(9583),v=t(8434),x=t(750),j=t(1108),y=t(2169),k=t(6743),Z=t(1182);function C(e){var n=e.children,t=e.title;return(0,l.jsxs)("div",{className:"folder-content",children:[t&&(0,l.jsx)("h2",{className:"folder-title",children:t}),(0,l.jsx)("div",{className:"folder-songs-wrapper",children:n})]})}function b(e){var n=e.children,t=e.backgroundColor,r=e.color,o=e.data,s=e.isDefault,g=e.defaultOpen,C=void 0!==g&&g,b=(0,i.Z)((0,c.useState)(!1),2),S=b[0],N=b[1],w=(0,i.Z)((0,c.useState)(!1),2),E=w[0],T=w[1],R=(0,i.Z)((0,c.useState)(o.name),2),_=R[0],z=R[1],F=(0,c.useRef)(null),D=(0,i.Z)((0,c.useState)(0),2),O=D[0],B=D[1];function I(){return(I=(0,a.Z)(function(){return(0,d.__generator)(this,function(e){switch(e.label){case 0:return[4,(0,x.jH)('Are you sure you want to delete "'.concat(o.name,"\"?  \n            The songs won't be deleted"))];case 1:if(!e.sent())return[2];return v.p.removeFolder(o),[2]}})})).apply(this,arguments)}return(0,c.useEffect)(function(){z(o.name)},[o.name]),(0,c.useEffect)(function(){if(F.current){B(F.current.getBoundingClientRect().height+100);var e=setTimeout(function(){var e=F.current;e&&B(e.getBoundingClientRect().height+100)},200);return function(){return clearTimeout(e)}}},[o.songs,S,n]),(0,c.useEffect)(function(){N(C)},[C]),(0,l.jsxs)("div",{className:"folder ".concat(S?"folder-expanded":""),style:{backgroundColor:t,color:r},children:[(0,l.jsxs)("div",{className:"folder-header",children:[(0,l.jsxs)("div",{onClick:function(){E||N(!S)},className:"folder-header-button",children:[(0,l.jsx)(h.fmn,{strokeWidth:2,style:{transform:"rotate(".concat(S?90:0,"deg)"),transition:"all 0.2s"},size:18}),E?(0,l.jsx)("input",{value:_,onChange:function(e){return z(e.target.value)},className:"folder-name"}):(0,l.jsx)("div",{className:"folder-name text-ellipsis",children:o.name})]}),!s&&(0,l.jsxs)(j.Rk,{offset:2.3,ignoreClickOutside:E,onClose:function(){return T(!1)},Icon:p.LCi,children:[(0,l.jsxs)(j.tc,{onClick:function(){E&&(v.p.renameFolder(o,_),T(!1)),T(!E)},children:[(0,l.jsx)(p.tU3,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:E?"Save":"Rename"})]}),(0,l.jsxs)(j.tc,{style:{padding:"0 0.4rem"},children:[(0,l.jsx)(p.ulB,{style:{marginRight:"0.4rem"}}),(0,l.jsx)("select",{className:"dropdown-select",value:o.filterType,onChange:function(e){var n=e.target.value;o.set({filterType:n}),v.p.updateFolder(o)},children:y.g0.map(function(e){return(0,l.jsx)("option",{value:e,children:(0,k.kC)(e.replaceAll("-"," "))},e)})})]}),(0,l.jsxs)(j.tc,{onClick:(0,a.Z)(function(){var e,n;return(0,d.__generator)(this,function(t){switch(t.label){case 0:return[4,Z.v.getManySerializedFromStorable(m()(o.songs))];case 1:return[4,Promise.all(t.sent().map(function(e){return f.bV.prepareSongDownload(e)}))];case 2:return e=t.sent().flat().filter(function(e,n,t){return t.findIndex(function(n){return n.id===e.id})===n}),n=(0,u.Z)(e).concat([o.serialize()]),f.bV.downloadFiles(n,"".concat(o.name,"-folder")),[2]}})}),children:[(0,l.jsx)(p.aBF,{style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Download"})]}),(0,l.jsxs)(j.tc,{onClick:function(){return I.apply(this,arguments)},children:[(0,l.jsx)(p.Xm5,{color:"#ed4557",style:{marginRight:"0.4rem"},size:14}),(0,l.jsx)(j.Qr,{text:"Delete"})]})]})]}),(0,l.jsx)("div",{className:"column folder-overflow",style:{maxHeight:S?"".concat(O,"px"):0},children:(0,l.jsx)("div",{className:"column folder-overflow-expandible",ref:F,children:n})})]})}var S=t(766),N=t(4931);function w(e){var n=e.songs,t=e.SongComponent,a=e.componentProps,u=e.className,d=e.style,f=e.baseType,g=e.exclude,m=(0,i.Z)((0,c.useState)(),2),h=m[0],p=m[1],v=(0,i.Z)((0,c.useState)(),2),x=v[0],j=v[1],y=(0,i.Z)((0,c.useState)(),2),k=y[0],Z=y[1],w=(0,i.Z)((0,c.useState)([]),2),E=w[0],T=w[1],R=(0,i.Z)((0,N.j)(E),1)[0];(0,c.useEffect)(function(){var e;T(n.filter(function(e){return!(null==g?void 0:g.includes(e.type))}))},[n,g]),(0,c.useEffect)(function(){var e=function(e){return R.some(function(n){return n.id===e.folderId})};p(new S.g("Recorded",null,E.filter(function(n){return!e(n)&&"recorded"===n.type}))),j(new S.g("Composed",null,E.filter(function(n){return!e(n)&&"composed"===n.type}))),Z(new S.g("Vsrg",null,E.filter(function(n){return!e(n)&&"vsrg"===n.type})))},[E,R]);var _=(0,i.Z)((0,s.F)(),1)[0],z=_.layer("menu_background",.35).lighten(.2);return(0,l.jsxs)("div",{className:u,style:d,children:[!(null==g?void 0:g.includes("composed"))&&x&&(0,l.jsx)(b,{backgroundColor:z.toString(),color:_.getText("menu_background").toString(),data:x,isDefault:!0,defaultOpen:"composed"===f,children:(0,l.jsxs)(C,{children:[x.songs.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))}),0===x.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, compose one!"})]})}),!(null==g?void 0:g.includes("recorded"))&&h&&(0,l.jsx)(b,{backgroundColor:z.toString(),color:_.getText("menu_background").toString(),data:h,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(C,{children:[h.songs.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))}),0===h.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, record one!"})]})}),!(null==g?void 0:g.includes("vsrg"))&&k&&(0,l.jsx)(b,{backgroundColor:z.toString(),color:_.getText("menu_background").toString(),data:k,isDefault:!0,defaultOpen:"recorded"===f,children:(0,l.jsxs)(C,{children:[k.songs.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))}),0===k.songs.length&&(0,l.jsx)("div",{style:{padding:"0.2rem",fontSize:"0.9rem"},children:"No songs here, create one!"})]})}),R.map(function(e){var n=e.songs.filter(function(e){return"composed"===e.type}),i=e.songs.filter(function(e){return"recorded"===e.type}),s=e.songs.filter(function(e){return"vsrg"===e.type});return(0,l.jsxs)(b,{backgroundColor:z.toString(),color:_.getText("menu_background").toString(),data:e,children:[!(null==g?void 0:g.includes("composed"))&&n.length>0&&(0,l.jsx)(C,{title:"Composed",children:n.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("recorded"))&&i.length>0&&(0,l.jsx)(C,{title:"Recorded",children:i.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))})}),!(null==g?void 0:g.includes("vsrg"))&&s.length>0&&(0,l.jsx)(C,{title:"Vsrg",children:s.map(function(e){return(0,c.createElement)(t,(0,o.Z)((0,r.Z)({},a),{data:e,key:null==e?void 0:e.id}))})}),0===n.length&&0===i.length&&0===s.length&&(0,l.jsx)("div",{style:{padding:"0.7rem",paddingTop:"0",fontSize:"0.9rem"},children:"The folder is empty"})]},e.id)})]})}},4995:function(e,n,t){t.d(n,{D:function(){return o}});var r=t(7294);function o(e){var n=e.text;return(0,r.useEffect)(function(){document.title=n},[n]),null}},1108:function(e,n,t){t.d(n,{Qr:function(){return g},Rk:function(){return f},tc:function(){return m}});var r=t(6042),o=t(828),i=t(5893),l=t(7053),c=t(7294),s=t(9583),a=t(8461),u=t(9878),d=t(2169);function f(e){var n=e.children,t=e.Icon,a=e.className,d=e.style,f=e.onClose,g=e.tooltip,m=e.offset,h=e.ignoreClickOutside,p=(0,o.Z)((0,c.useState)(!1),2),v=p[0],x=p[1],j=(0,o.Z)((0,c.useState)(!1),2),y=j[0],k=j[1],Z=(0,l.ZP)(function(){!h&&(x(!1),f&&f())},{active:v,ignoreFocusable:!0});(0,c.useEffect)(function(){var e,n=Z.current;if(n){var t=n.getBoundingClientRect();k(t.top+t.height>(null!==(e=window.innerHeight)&&void 0!==e?e:0))}},[v,Z]);var C="translateX(calc(-100% + ".concat(void 0===m?3:m,"rem)) ").concat(y?"translateY(calc(-100% - 2rem))":"");return(0,i.jsxs)("div",{className:"".concat(void 0===a?"":a," floating-dropdown ").concat(v?"floating-dropdown-active":""),children:[(0,i.jsx)(u.v,{style:(0,r.Z)({margin:0},void 0===d?{}:d,v?{backgroundColor:"var(--accent)",color:"var(--accent-text)"}:{}),onClick:function(){x(!v),v&&f&&f()},ariaLabel:v?"Close":"Open",tooltip:g,children:v?(0,i.jsx)(s.aHS,{}):(0,i.jsx)(t,{})}),(0,i.jsx)("div",{ref:Z,className:"floating-dropdown-children",style:{transform:C,"--existing-transform":C,transformOrigin:y?"bottom":"top"},children:n})]})}function g(e){var n=e.text;return(0,i.jsx)("div",{className:"floating-dropdown-text",children:n})}function m(e){var n=e.children,t=e.onClick,o=e.style;return(0,i.jsx)(a.J,{ariaLabel:"Floating Dropdown Button",className:"row row-centered",style:(0,r.Z)({padding:"0.4rem",minWidth:"unset"},o),onClick:t,children:n})}(0,r.Z)({},d.n)},4931:function(e,n,t){t.d(n,{j:function(){return s}});var r=t(828),o=t(6305),i=t(7294),l=t(8949),c=t(8434);function s(e){var n=(0,r.Z)((0,i.useState)(c.p.folders),2),t=n[0],s=n[1],a=(0,r.Z)((0,i.useState)([]),2),u=a[0],d=a[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){s(e)},n=(0,l.N7)(c.p.folders,function(){e((0,o.Z)(c.p.folders))}),e((0,o.Z)(c.p.folders)),n},[]),(0,i.useEffect)(function(){if(!e)return d(t);d(t.map(function(n){var t=n.clone(),r=e.filter(function(e){return e.folderId===n.id});return"date-created"===n.filterType?t.songs=r:"alphabetical"===n.filterType?t.songs=r.sort(function(e,n){return e.name.localeCompare(n.name)}):t.songs=r,t}))},[e,t]),[u]}},7008:function(e,n,t){t.d(n,{n:function(){return s}});var r=t(828),o=t(6305),i=t(7294),l=t(8949),c=t(2650);function s(){var e=(0,r.Z)((0,i.useState)(c.k.songs),2),n=e[0],t=e[1];return(0,i.useEffect)(function(){var e,n;return e=function(e){t(e)},n=(0,l.N7)(c.k.songs,function(){e((0,o.Z)(c.k.songs))}),e((0,o.Z)(c.k.songs)),n},[]),[n]}}}]);